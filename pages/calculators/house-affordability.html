<!DOCTYPE html>
<html lang="en">

<head>
  <title>HeroZero â€“ Rent vs Buy (House Affordability)</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-2137440189333906">
  <meta name="description" content="Compare renting vs buying a house with HeroZero's House Affordability Calculator.">
  <meta name="keywords" content="house affordability, rent vs buy, financial tools">
  <link rel="apple-touch-icon" sizes="180x180" href="https://herozero.in/assets/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://herozero.in/assets/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://herozero.in/assets/img/favicon-16x16.png">
  <link rel="manifest" href="https://herozero.in/site.webmanifest">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/zephyr/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    crossorigin="anonymous">
  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "House Affordability Calculator",
  "url": "https://herozero.in/pages/calculators/house-affordability.html"
}
</script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2137440189333906"
    crossorigin="anonymous"></script>
  <style>
    body {
      animation: fadeIn .6s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card {
      transition: transform .25s ease, box-shadow .25s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, .15);
    }

    .metric {
      display: flex;
      align-items: center;
      gap: .75rem;
    }

    .metric .icon {
      font-size: 1.75rem;
    }

    .badge-soft {
      background: rgba(13, 110, 253, .1);
      color: #0d6efd;
    }

    .rule {
      display: flex;
      align-items: center;
      gap: .5rem;
      padding: .5rem;
      border-radius: .5rem;
    }

    .rule.pass {
      background: #d1e7dd;
      color: #0f5132;
    }

    .rule.fail {
      background: #f8d7da;
      color: #842029;
    }

    .tab-content .card {
      margin-top: .75rem;
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark">
    <div class="container">
      <a class="navbar-brand fw-bold" href="https://herozero.in/index.html">
        <img src="https://herozero.in/assets/img/favicon-32x32.png" class="me-2">HeroZero
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link active" href="https://herozero.in/"><i
                class="bi bi-house-fill me-2"></i>Home</a></li>
          <li class="nav-item dropdown" data-bs-theme="light"><a class="nav-link active dropdown-toggle"
              data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true"
              aria-expanded="false">Calculators</a>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="https://herozero.in/pages/calculators/car-affordability.html">
                <i class="bi bi-car-front-fill"></i> Car Affordability
              </a>
              <a class="dropdown-item" href="https://herozero.in/pages/calculators/house-affordability.html">
                <i class="bi bi-house-door-fill"></i> House Affordability
              </a>
              <a class="dropdown-item" href="https://herozero.in/pages/calculators/mobile-affordability.html">
                <i class="bi bi-phone"></i> Mobile Affordability
              </a>
              <a class="dropdown-item" href="https://herozero.in/pages/calculators/stock-average-price.html">
                <i class="bi bi-bar-chart-line-fill"></i> Stock Average Price
              </a>
            </div>
          </li>
          <li class="nav-item"><a class="nav-link" href="/pages/blog.html"><i class="bi bi-journal-text me-2"></i>Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="bg-light text-center py-5 mt-5" id="overview">
    <div class="container">
      <h1 class="fw-bold mb-2" id="overview-heading"><i class="bi bi-house"></i> Rent vs Buy â€” House Affordability</h1>
      <p class="lead mb-0">
        Compare long-term wealth if you <strong>Buy</strong> or <strong>Stay on Rent</strong>.
        Hover <i class="bi bi-info-circle text-primary"></i> for definitions.
      </p>
    </div>
  </section>

  <section class="container py-4">
    <div class="row g-4">
      <!-- Inputs -->
      <div class="col-lg-7">
        <div class="card shadow-sm p-3">
          <ul class="nav nav-tabs" id="tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#buyTab" type="button"
                role="tab">Buy</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#rentTab" type="button"
                role="tab">Rent</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#invTaxTab" type="button"
                role="tab">Investments & Tax</button>
            </li>
          </ul>

          <div class="tab-content">
            <!-- BUY -->
            <div class="tab-pane fade show active" id="buyTab" role="tabpanel">
              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <label class="form-label">House Value (â‚¹)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Total on-road cost incl. stamp duty & registration."></i>
                  </label>
                  <input type="number" id="housePrice" class="form-control" value="10000000" min="0">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Down Payment (%)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Upfront amount paid from your pocket. 20%+ recommended."></i>
                  </label>
                  <input type="number" id="downPct" class="form-control" value="20" min="0" max="100">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Interest (% p.a.)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Annual home loan interest rate."></i>
                  </label>
                  <input type="number" id="roi" class="form-control" value="9.075" step="0.01">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Tenure (years)</label>
                  <input type="number" id="tenure" class="form-control" value="20" min="1" max="40">
                </div>
                <div class="col-md-4">
                  <label class="form-label">House Appreciation (%pa)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Expected average annual growth in property value."></i>
                  </label>
                  <input type="number" id="appreciation" class="form-control" value="4.3" step="0.1">
                </div>

                <div class="col-12">
                  <div class="card p-3">
                    <h6 class="mb-2">Associated Expenses (Annual)</h6>
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label class="form-label">Property Tax (â‚¹) <span class="text-muted small">(grow
                            %)</span></label>
                        <div class="input-group">
                          <input type="number" id="propTax" class="form-control" value="50000">
                          <input type="number" id="propTaxInc" class="form-control" value="5"
                            title="Annual increase (%)" data-bs-toggle="tooltip">
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Society Maintenance (â‚¹) <span class="text-muted small">(grow
                            %)</span></label>
                        <div class="input-group">
                          <input type="number" id="socMaint" class="form-control" value="50000">
                          <input type="number" id="socMaintInc" class="form-control" value="5">
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">House Maintenance (â‚¹) <span class="text-muted small">(grow
                            %)</span></label>
                        <div class="input-group">
                          <input type="number" id="houseMaint" class="form-control" value="10000">
                          <input type="number" id="houseMaintInc" class="form-control" value="5">
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label class="form-label">Home Insurance (â‚¹) <span class="text-muted small">(grow
                            %)</span></label>
                        <div class="input-group">
                          <input type="number" id="homeIns" class="form-control" value="0">
                          <input type="number" id="homeInsInc" class="form-control" value="0">
                        </div>
                      </div>
                    </div>
                    <div class="form-text mt-2">Growth % is applied each year (compounded).</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- RENT -->
            <div class="tab-pane fade" id="rentTab" role="tabpanel">
              <div class="row g-3 mt-2">
                <div class="col-md-6">
                  <label class="form-label">Monthly Rent (â‚¹)</label>
                  <input type="number" id="rent" class="form-control" value="30000">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Annual Rent Increase (%)</label>
                  <input type="number" id="rentInc" class="form-control" value="10" step="0.1">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Deposit + Brokerage + Other (â‚¹)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Non-recoverable upfront costs for renting."></i>
                  </label>
                  <input type="number" id="deposit" class="form-control" value="120000">
                </div>
                <div class="col-md-6">
                  <label class="form-label">Stay Duration (years)</label>
                  <input type="number" id="years" class="form-control" value="20" min="1">
                </div>
              </div>
            </div>

            <!-- INVESTMENTS & TAX -->
            <div class="tab-pane fade" id="invTaxTab" role="tabpanel">
              <div class="row g-3 mt-2">
                <div class="col-md-4">
                  <label class="form-label">SIP ROI (% p.a.)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Expected annual return for monthly SIP (EMI âˆ’ Rent)."></i>
                  </label>
                  <input type="number" id="sipRoi" class="form-control" value="10" step="0.1">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Lumpsum ROI (% p.a.)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Expected annual return for down payment invested if renting."></i>
                  </label>
                  <input type="number" id="lumpRoi" class="form-control" value="10" step="0.1">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Tax Slab (%)
                    <i class="bi bi-info-circle text-primary" data-bs-toggle="tooltip"
                      title="Used to estimate tax savings from 80C/24(b) and HRA exemption."></i>
                  </label>
                  <input type="number" id="taxRate" class="form-control" value="30" step="1">
                </div>

                <div class="col-12">
                  <div class="card p-3">
                    <h6 class="mb-2">HRA (Rent) â€” Optional</h6>
                    <div class="row g-3">
                      <div class="col-md-4">
                        <label class="form-label">Basic Salary (â‚¹)</label>
                        <input type="number" id="hraBasic" class="form-control" value="500000">
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">HRA Received (â‚¹/yr)</label>
                        <input type="number" id="hraReceived" class="form-control" value="200000">
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">City</label>
                        <select id="hraCity" class="form-select">
                          <option value="metro" selected>Metro (50% of basic)</option>
                          <option value="nonmetro">Non-Metro (40% of basic)</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-text">We compute HRA exemption each year using the standard rule and apply your tax
                      slab to estimate tax savings.</div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="card p-3">
                    <h6 class="mb-2">Home Loan Tax (Buy) â€” Limits</h6>
                    <div class="row g-3">
                      <div class="col-md-4">
                        <label class="form-label">80C Principal Limit (â‚¹)</label>
                        <input type="number" id="lim80c" class="form-control" value="150000">
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">24(b) Interest Limit (â‚¹)</label>
                        <input type="number" id="lim24b" class="form-control" value="200000">
                      </div>
                      <div class="col-md-4">
                        <label class="form-label">Apply tax benefits?</label>
                        <select id="applyTax" class="form-select">
                          <option value="yes" selected>Yes</option>
                          <option value="no">No</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-text">For self-occupied homes: 80C for principal, 24(b) for interest. We multiply
                      allowed deductions by your tax slab % for savings.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-3 d-grid">
            <button class="btn btn-primary btn-lg" id="calcBtn"><i class="bi bi-calculator"></i> Compare</button>
          </div>
        </div>
      </div>

      <!-- Results -->
      <div class="col-lg-5">
        <div id="results" class="card shadow-sm p-4" style="display:none;">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="mb-0">Results</h4>
            <span id="winPill" class="badge text-bg-secondary">â€”</span>
          </div>
          <canvas id="winChart" height="160" class="mb-3"></canvas>

          <div class="vstack gap-3">
            <div class="metric">
              <i class="bi bi-graph-up-arrow icon text-primary"></i>
              <div>
                <div class="small text-muted">Net Gain â€“ Buy</div>
                <div class="fs-5 fw-semibold" id="gainBuy">â‚¹0</div>
              </div>
            </div>
            <div class="metric">
              <i class="bi bi-graph-up icon text-primary"></i>
              <div>
                <div class="small text-muted">Net Gain â€“ Rent</div>
                <div class="fs-5 fw-semibold" id="gainRent">â‚¹0</div>
              </div>
            </div>
            <div class="metric">
              <i class="bi bi-trophy icon text-primary"></i>
              <div>
                <div class="small text-muted">Advantage</div>
                <div class="fs-5 fw-semibold" id="advantage">â‚¹0</div>
              </div>
            </div>
          </div>

          <hr class="my-3" />

          <h5 id="verdict" class="mb-2">â€”</h5>
          <p id="tips" class="mb-0 small text-muted"></p>

          <hr class="my-3" />

          <h6 class="mb-2">Quick Checks</h6>
          <div id="ruleDP" class="rule">Down Payment â‰¥ 20%</div>
          <div id="ruleTenure" class="rule">Loan Tenure â‰¤ 30 years</div>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-primary text-white text-center py-3 mt-4">
    <nav class="mb-2">
      <a class="text-white mx-2" href="https://herozero.in/pages/about.html">About</a>
      <a class="text-white mx-2" href="https://herozero.in/pages/contact.html">Contact</a>
      <a class="text-white mx-2" href="https://herozero.in/pages/privacy-policy.html">Privacy Policy</a>
      <a class="text-white mx-2" href="https://herozero.in/pages/terms-of-use.html">Terms of Use</a>
      <a class="text-white mx-2" href="https://herozero.in/pages/disclaimer.html">Disclaimer</a>
    </nav>
    <small>&copy; 2025 HeroZero. All Rights Reserved.</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Utilities
    const INR = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR', maximumFractionDigits: 0 });
    const clamp = (v, min, max) => Math.min(Math.max(v, min), max);

    function countUp(el, to, prefix = 'â‚¹', duration = 800) {
      const from = Number((el.dataset.value || "0").replace(/[^0-9.-]/g, '')) || 0;
      const start = performance.now();
      function frame(t) {
        const p = clamp((t - start) / duration, 0, 1);
        const ease = 1 - Math.pow(1 - p, 3);
        const val = from + (to - from) * ease;
        el.textContent = prefix ? `${prefix}${Math.round(val).toLocaleString('en-IN')}` : Math.round(val).toLocaleString('en-IN');
        if (p < 1) requestAnimationFrame(frame); else el.dataset.value = String(to);
      }
      requestAnimationFrame(frame);
    }
    // Tooltips
    document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(el => new bootstrap.Tooltip(el));

    // Doughnut gauge
    let chart;
    function renderGauge(buyGain, rentGain) {
      const total = Math.abs(buyGain) + Math.abs(rentGain) || 1;
      const buyShare = Math.max(0, Math.abs(buyGain) / total * 100);
      const rentShare = 100 - buyShare;
      const colorBuy = '#0d6efd';
      const colorRent = '#28a745';
      const ctx = document.getElementById('winChart').getContext('2d');
      if (chart) chart.destroy();
      chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Buy', 'Rent'],
          datasets: [{ data: [buyShare, rentShare], backgroundColor: [colorBuy, colorRent], borderWidth: 0 }]
        },
        options: { cutout: '70%', plugins: { legend: { display: false }, tooltip: { enabled: false } }, animation: { duration: 600 } }
      });
    }

    // EMI
    function emi(p, annualRate, years) {
      const r = annualRate / 12 / 100;
      const n = years * 12;
      if (r === 0) return p / n;
      const f = Math.pow(1 + r, n);
      return p * r * f / (f - 1);
    }

    // FV of SIP (monthly invest at monthlyRate for n months)
    function fvSIP(monthly, annualRate, years) {
      const r = annualRate / 12 / 100;
      const n = Math.round(years * 12);
      if (r === 0) return monthly * n;
      return monthly * ((Math.pow(1 + r, n) - 1) / r) * (1 + r);
    }

    // FV of Lumpsum (annual comp)
    function fvLump(principal, annualRate, years) {
      return principal * Math.pow(1 + annualRate / 100, years);
    }

    // Yearly rent with escalation
    function totalRent(baseMonthly, incPct, years) {
      let total = 0;
      let m = baseMonthly;
      for (let y = 1; y <= years; y++) {
        total += m * 12;
        m *= (1 + incPct / 100);
      }
      return total;
    }

    // HRA tax savings per year (simplified)
    function hraSavingsPerYear(basic, hraReceived, annualRent, cityMetro, taxRatePct) {
      // Exemption = min(Actual HRA, Rent paid - 10% of basic, 50%/40% of basic)
      const limitBasic = (cityMetro === 'metro') ? 0.50 * basic : 0.40 * basic;
      const eligible = Math.max(0, Math.min(hraReceived, Math.max(0, annualRent - 0.10 * basic), limitBasic));
      return eligible * (taxRatePct / 100);
    }

    // Tax savings Buy (per year): 80C principal + 24(b) interest, limited
    function buyTaxSavingsPerYear(principalPaid, interestPaid, lim80c, lim24b, taxRatePct) {
      const allowedP = Math.min(principalPaid, lim80c);
      const allowedI = Math.min(interestPaid, lim24b);
      return (allowedP + allowedI) * (taxRatePct / 100);
    }

    // Main calculate
    function calculate() {
      // Buy inputs
      const price = +document.getElementById('housePrice').value || 0;
      const downPct = Math.min(Math.max(+document.getElementById('downPct').value || 0, 0), 100);
      const rate = +document.getElementById('roi').value || 0;
      const tenure = +document.getElementById('tenure').value || 0;
      const appreciation = +document.getElementById('appreciation').value || 0;

      const propTax = +document.getElementById('propTax').value || 0;
      const propTaxInc = +document.getElementById('propTaxInc').value || 0;
      const socMaint = +document.getElementById('socMaint').value || 0;
      const socMaintInc = +document.getElementById('socMaintInc').value || 0;
      const houseMaint = +document.getElementById('houseMaint').value || 0;
      const houseMaintInc = +document.getElementById('houseMaintInc').value || 0;
      const homeIns = +document.getElementById('homeIns').value || 0;
      const homeInsInc = +document.getElementById('homeInsInc').value || 0;

      // Rent inputs
      const rent = +document.getElementById('rent').value || 0;
      const rentInc = +document.getElementById('rentInc').value || 0;
      const deposit = +document.getElementById('deposit').value || 0;
      const years = +document.getElementById('years').value || 1;

      // Inv/Tax
      const sipRoi = +document.getElementById('sipRoi').value || 0;
      const lumpRoi = +document.getElementById('lumpRoi').value || 0;
      const taxRate = +document.getElementById('taxRate').value || 0;

      const hraBasic = +document.getElementById('hraBasic').value || 0;
      const hraReceived = +document.getElementById('hraReceived').value || 0;
      const hraCity = document.getElementById('hraCity').value;

      const lim80c = +document.getElementById('lim80c').value || 0;
      const lim24b = +document.getElementById('lim24b').value || 0;
      const applyTax = document.getElementById('applyTax').value === 'yes';

      // Derived
      const downPayment = price * downPct / 100;
      const loan = Math.max(0, price - downPayment);
      const monthlyEMI = emi(loan, rate, tenure);

      // BUY track â€” iterate yearly for expenses & tax savings
      let totalEMI = 0, totalInterest = 0, totalPrincipal = 0;
      let balance = loan;
      const mRate = rate / 12 / 100;
      const nMonths = Math.min(years * 12, tenure * 12); // only count EMIs for years of comparison
      for (let m = 1; m <= nMonths; m++) {
        const interest = balance * mRate;
        const principal = Math.min(monthlyEMI - interest, balance);
        totalInterest += interest;
        totalPrincipal += principal;
        totalEMI += interest + principal;
        balance -= principal;
        if (balance < 1e-6) break;
      }

      // Associated expenses (annual, growing)
      function growSum(base, inc) {
        let sum = 0, v = base;
        for (let y = 1; y <= years; y++) { sum += v; v *= (1 + inc / 100); }
        return sum;
      }
      const sumPropTax = growSum(propTax, propTaxInc);
      const sumSoc = growSum(socMaint, socMaintInc);
      const sumHouseMaint = growSum(houseMaint, houseMaintInc);
      const sumIns = growSum(homeIns, homeInsInc);
      const totalExpenses = sumPropTax + sumSoc + sumHouseMaint + sumIns;

      // Buy tax savings (approx per year using average principal/interest over completed years)
      let buyTaxSaved = 0;
      if (applyTax) {
        // Approximation: distribute principal and interest paid across years proportionally by months paid
        const monthsPerYear = 12;
        const yearsPaid = Math.ceil(nMonths / monthsPerYear);
        let principalRemaining = totalPrincipal, interestRemaining = totalInterest;
        for (let y = 1; y <= years; y++) {
          if (principalRemaining <= 0 && interestRemaining <= 0) break;
          const principalYear = Math.min(principalRemaining, totalPrincipal / yearsPaid || 0);
          const interestYear = Math.min(interestRemaining, totalInterest / yearsPaid || 0);
          buyTaxSaved += buyTaxSavingsPerYear(principalYear, interestYear, lim80c, lim24b, taxRate);
          principalRemaining -= principalYear;
          interestRemaining -= interestYear;
        }
      }

      const totalCostBuy = downPayment + totalEMI + totalExpenses - buyTaxSaved;
      const futureValueHouse = price * Math.pow(1 + appreciation / 100, years);
      const netGainBuy = futureValueHouse - totalCostBuy;

      // RENT track
      // Total rent with annual escalation
      const totalRentPaid = totalRent(rent, rentInc, years);

      // SIP: invest (EMI - current monthly rent per year segment) per month; approximate using base rent increasing yearly
      // We'll sum FV of a different SIP each year because contribution changes when rent escalates
      let fvSipTotal = 0;
      let currentRentMonthly = rent;
      for (let y = 1; y <= years; y++) {
        const sipMonthly = Math.max(0, monthlyEMI - currentRentMonthly);
        fvSipTotal += fvSIP(sipMonthly, sipRoi, years - (y - 1)); // contributions start in year y for remaining horizon
        currentRentMonthly *= (1 + rentInc / 100);
      }

      // Lumpsum: invest down payment upfront
      const fvLumpsum = fvLump(downPayment, lumpRoi, years);

      // HRA: per-year tax savings (using current year's rent)
      let hraSaved = 0;
      if (hraReceived > 0 && hraBasic > 0) {
        let annualRent = rent * 12;
        for (let y = 1; y <= years; y++) {
          hraSaved += hraSavingsPerYear(hraBasic, hraReceived, annualRent, hraCity, taxRate);
          annualRent *= (1 + rentInc / 100);
        }
      }

      const totalInvestments = fvSipTotal + fvLumpsum + hraSaved;
      const netGainRent = totalInvestments - totalRentPaid - deposit;

      // Verdict & UI
      const buyBetter = netGainBuy > netGainRent;
      const winner = buyBetter ? 'Buy' : 'Rent';
      const advantage = Math.abs(netGainBuy - netGainRent);
      const share = (advantage === 0) ? 50 : (buyBetter ? 70 : 70); // cosmetic split for donut color emphasis
      document.getElementById('winPill').textContent = `${winner} wins`;

      countUp(document.getElementById('gainBuy'), netGainBuy);
      countUp(document.getElementById('gainRent'), netGainRent);
      countUp(document.getElementById('advantage'), advantage);

      renderGauge(netGainBuy, netGainRent);
      const verdictEl = document.getElementById('verdict');
      const tipsEl = document.getElementById('tips');

      if (buyBetter) {
        verdictEl.textContent = 'ðŸ  Buy edges out Rent for your inputs.';
        tipsEl.textContent = 'If Buy barely wins, try increasing down payment or negotiating interest rate to widen the margin.';
      } else if (netGainRent > netGainBuy) {
        verdictEl.textContent = 'ðŸ“ Renting & Investing beats Buying for now.';
        tipsEl.textContent = 'Consider renting while investing the down payment & EMI-Rent difference. Revisit if property prices correct or rates drop.';
      } else {
        verdictEl.textContent = 'âš–ï¸ Itâ€™s a close call.';
        tipsEl.textContent = 'Fine-tune assumptions: appreciation, rent growth, ROI, and tax slab can swing the decision.';
      }

      // Quick rules
      const ruleDP = document.getElementById('ruleDP');
      const ruleTenure = document.getElementById('ruleTenure');
      const dpPass = downPct >= 20;
      const tenPass = tenure <= 30;
      ruleDP.className = `rule ${dpPass ? 'pass' : 'fail'}`;
      ruleDP.innerHTML = `${dpPass ? 'âœ…' : 'âŒ'} Down Payment â‰¥ 20%`;
      ruleTenure.className = `rule ${tenPass ? 'pass' : 'fail'}`;
      ruleTenure.innerHTML = `${tenPass ? 'âœ…' : 'âŒ'} Loan Tenure â‰¤ 30 years`;

      document.getElementById('results').style.display = 'block';
    }

    // Debounce
    let debounce;
    function trigger() { clearTimeout(debounce); debounce = setTimeout(calculate, 200); }
    document.getElementById('calcBtn').addEventListener('click', calculate);
    document.querySelectorAll('input,select').forEach(el => { el.addEventListener('input', trigger); el.addEventListener('change', trigger); });

    // Initial
    window.addEventListener('DOMContentLoaded', calculate);
  </script>
</body>

</html>