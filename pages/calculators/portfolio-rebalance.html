<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-2137440189333906" />
  <title>HeroZero ‚Äì Portfolio Rebalancer</title>
  <meta name="description" content="Enter current values & targets to compute buy/sell actions needed to restore your portfolio allocation." />
  <meta name="keywords" content="portfolio rebalance, asset allocation calculator, buy sell amounts" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <link rel="stylesheet" href="/assets/css/tailwind.css" />
  <link rel="stylesheet" href="/assets/css/tailwind-input.css" />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"HeroZero - Portfolio Rebalancer","url":"https://herozero.in/pages/calculators/portfolio-rebalance.html"}</script>
  <script>(function (c, l, a, r, i, t, y) { c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) }; t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i; y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y); })(window, document, "clarity", "script", "szq30hz6u5");</script>  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2137440189333906" crossorigin="anonymous"></script>
</head>
<body class="min-h-screen flex flex-col font-sans text-slate-800 dark:text-slate-200">
  <header class="hero-gradient">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex items-center justify-between">
      <a href="/index.html" class="flex items-center gap-2 focus-ring">
        <img src="/assets/img/favicon-32x32.png" class="w-8 h-8" alt="HeroZero" />
        <span class="font-extrabold text-slate-900 dark:text-slate-100 text-xl">HeroZero</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm text-slate-600 dark:text-slate-300">
        <a href="/" class="hover:text-slate-900 dark:hover:text-white focus-ring">Home</a>
        <a href="/index.html#calculators" class="hover:text-slate-900 dark:hover:text-white focus-ring">Calculators</a>
        <a href="/pages/blog.html" class="hover:text-slate-900 dark:hover:text-white focus-ring">Blog</a>
        <button id="themeToggle" type="button" class="focus-ring rounded px-3 py-1.5 border border-slate-300 dark:border-slate-600 text-xs font-medium hover:bg-slate-100 dark:hover:bg-slate-700 transition" aria-pressed="false" aria-label="Toggle dark mode">üåô</button>
      </nav>
    </div>
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-10 text-center">
      <h1 class="text-3xl sm:text-4xl font-extrabold leading-tight text-slate-900 dark:text-slate-100 flex items-center justify-center gap-3">
        <span class="inline-flex w-12 h-12 items-center justify-center rounded-xl bg-brand text-white shadow">
                      <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" class="w-full h-full">
              <circle cx="24" cy="24" r="14" />
              <path d="M24 10v14l8 4" />
            </svg>
        </span>
        <span>Portfolio Rebalancer</span>
      </h1>
      <p class="mt-4 text-sm sm:text-base text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">Compute recommended Buy / Sell adjustments to realign holdings with target allocation. Add rows, set current values & target %.</p>
    </div>
  </header>
  <main class="flex-1">
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
      <div class="grid gap-12 lg:grid-cols-2 lg:items-start">
        <!-- Card 1: Holdings + Results -->
        <div class="card-tw p-8 space-y-10" id="rebalanceCard">
          <div class="space-y-6">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
              <div class="text-left">
                <h2 class="text-2xl font-extrabold text-slate-900 dark:text-slate-100">Holdings</h2>
                <p class="text-xs text-slate-500 dark:text-slate-400">Enter asset name, current value & target % (sum ‚âà 100%).</p>
              </div>
              <div class="flex flex-wrap gap-2">
                <button id="addRowBtn" type="button" class="btn-primary btn-ripple text-xs px-4 py-2">Add Row</button>
                <button id="removeSelectedBtn" type="button" class="btn-ripple text-xs px-4 py-2 rounded-xl border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 font-semibold hover:bg-red-50 dark:hover:bg-red-900/30">Remove Selected</button>
                <button id="calcBtn" type="button" class="btn-primary btn-ripple text-xs px-4 py-2">Rebalance</button>
              </div>
            </div>
            <div class="overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-xl">
              <table id="holdingsTable" class="min-w-full text-sm">
                <thead class="bg-slate-50 dark:bg-slate-800/60">
                  <tr class="text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400">
                    <th class="px-3 py-2 text-left w-8"><input type="checkbox" id="selectAll" class="accent-brand"/></th>
                    <th class="px-3 py-2 text-left">Asset</th>
                    <th class="px-3 py-2 text-right">Current (‚Çπ)</th>
                    <th class="px-3 py-2 text-right">Target %</th>
                    <th class="px-3 py-2 text-center w-16">Remove</th>
                  </tr>
                </thead>
                <tbody id="holdingsBody" class="divide-y divide-slate-100 dark:divide-slate-700">
                  <tr class="h-row">
                    <td class="px-3 py-2"><input type="checkbox" class="row-check accent-brand"/></td>
                    <td class="px-3 py-2"><input value="Equity" class="h-name calc-input w-full rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-medium"/></td>
                    <td class="px-3 py-2 text-right"><span class="input-wrap"><span class="input-affix">‚Çπ</span><input type="number" value="700000" class="h-value calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></span></td>
                    <td class="px-3 py-2 text-right"><input type="number" value="60" class="h-target calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></td>
                    <td class="px-3 py-2 text-center"><button type="button" class="remove-row inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400" aria-label="Remove row">‚úï</button></td>
                  </tr>
                  <tr class="h-row">
                    <td class="px-3 py-2"><input type="checkbox" class="row-check accent-brand"/></td>
                    <td class="px-3 py-2"><input value="Debt" class="h-name calc-input w-full rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-medium"/></td>
                    <td class="px-3 py-2 text-right"><span class="input-wrap"><span class="input-affix">‚Çπ</span><input type="number" value="300000" class="h-value calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></span></td>
                    <td class="px-3 py-2 text-right"><input type="number" value="40" class="h-target calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></td>
                    <td class="px-3 py-2 text-center"><button type="button" class="remove-row inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400" aria-label="Remove row">‚úï</button></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div id="targetWarn" class="hidden mt-3 text-xs font-medium rounded-md px-3 py-2 bg-amber-100 text-amber-800 border border-amber-300 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-700"></div>
          </div>
          <br/>
          <div class="space-y-6 border-t border-slate-200 dark:border-slate-700 pt-8" id="resultsCard">
            <div class="flex items-center justify-between flex-wrap gap-4">
              <h2 class="text-xl font-extrabold text-slate-900 dark:text-slate-100">Results</h2>
              <div id="resultSummary" class="text-xs text-slate-500 dark:text-slate-400"></div>
            </div>
            <div class="grid sm:grid-cols-4 gap-5" id="metricGrid">
              <div class="metric-card bg-indigo-50/80 dark:bg-indigo-900/20 border-indigo-200/70 dark:border-indigo-600/40"><div class="metric-label">Portfolio</div><div id="totalValue" class="metric-value font-mono">‚Çπ0</div></div>
              <div class="metric-card bg-emerald-50/80 dark:bg-emerald-900/20 border-emerald-200/70 dark:border-emerald-600/40"><div class="metric-label">Total Buy</div><div id="totalBuy" class="metric-value font-mono">‚Çπ0</div></div>
              <div class="metric-card bg-red-50/80 dark:bg-red-900/20 border-red-200/70 dark:border-red-600/40"><div class="metric-label">Total Sell</div><div id="totalSell" class="metric-value font-mono">‚Çπ0</div></div>
              <div class="metric-card bg-slate-50/80 dark:bg-slate-800/30 border-slate-200/70 dark:border-slate-600/40"><div class="metric-label">Target Sum</div><div id="targetSum" class="metric-value font-mono">0%</div></div>
            </div>
            <div class="overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-xl" id="resultTableWrap">
              <table class="min-w-full text-xs sm:text-sm" id="resultTable" aria-label="Rebalance recommendations"></table>
            </div>
            <div id="rebalanceNote" class="text-lg text-slate-500 dark:text-slate-400 leading-relaxed"></div>
          </div>
        </div>
        <!-- Card 2: Chart + Guide -->
        <div class="card-tw p-8 space-y-8" id="infoCard" style="margin-left: 1rem;">
          <div class="space-y-4">
            <h3 class="text-2xl font-semibold tracking-wide text-slate-700 dark:text-slate-300 uppercase">Allocation Chart</h3>
            <div class="h-[360px]" id="allocChart" aria-label="Current vs target allocation chart"></div>
          </div>
          <div class="space-y-4 border-t border-slate-200 dark:border-slate-700 pt-6">
            <h3 class="text-sm font-semibold tracking-wide text-slate-700 dark:text-slate-300 uppercase">Why Rebalance?</h3>
            <p class="text-xs leading-relaxed text-slate-600 dark:text-slate-400">Rebalancing restores intended risk & return mix. As winners grow overweight and laggards shrink, portfolio drift changes risk. Periodic or threshold-based rebalancing realigns allocation.</p>
            <details class="group border border-slate-200 dark:border-slate-700 rounded-md overflow-hidden">
              <summary class="flex items-center justify-between cursor-pointer px-4 py-2 text-xs font-semibold bg-slate-50 dark:bg-slate-800/60 group-hover:bg-slate-100 dark:group-hover:bg-slate-700/60">When to Rebalance <svg class="chevron w-4 h-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8l4 4 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg></summary>
              <div class="px-4 pb-4 pt-2 text-[11px] leading-relaxed text-slate-600 dark:text-slate-400">Time (e.g. yearly/quarterly) or drift rule (e.g. any asset off target by >5%).</div>
            </details>
            <details class="group border border-slate-200 dark:border-slate-700 rounded-md overflow-hidden">
              <summary class="flex items-center justify-between cursor-pointer px-4 py-2 text-xs font-semibold bg-slate-50 dark:bg-slate-800/60 group-hover:bg-slate-100 dark:group-hover:bg-slate-700/60">How to Execute <svg class="chevron w-4 h-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8l4 4 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg></summary>
              <div class="px-4 pb-4 pt-2 text-[11px] leading-relaxed text-slate-600 dark:text-slate-400">Add new money to underweights, redirect dividends, or sell overweight assets (consider taxes & costs).</div>
            </details>
            <details class="group border border-slate-200 dark:border-slate-700 rounded-md overflow-hidden">
              <summary class="flex items-center justify-between cursor-pointer px-4 py-2 text-xs font-semibold bg-slate-50 dark:bg-slate-800/60 group-hover:bg-slate-100 dark:group-hover:bg-slate-700/60">Limitations <svg class="chevron w-4 h-4" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8l4 4 4-4" stroke-linecap="round" stroke-linejoin="round"/></svg></summary>
              <ul class="list-disc pl-5 mt-3 text-[11px] leading-relaxed space-y-1 text-slate-600 dark:text-slate-400"><li>Ignores taxes, fees, slippage.</li><li>Uses point-in-time values only.</li><li>No asset constraints.</li></ul>
            </details>
            <div class="text-[10px] text-slate-500 dark:text-slate-500 pt-1">Not advice. Validate before trading.</div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="bg-slate-900 text-slate-300 text-sm mt-auto">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col md:flex-row gap-4 md:items-center md:justify-between">
      <nav class="flex gap-5 flex-wrap">
        <a href="/pages/about.html" class="hover:text-white">About</a>
        <a href="/pages/contact.html" class="hover:text-white">Contact</a>
        <a href="/pages/privacy-policy.html" class="hover:text-white">Privacy Policy</a>
        <a href="/pages/terms-of-use.html" class="hover:text-white">Terms of Use</a>
        <a href="/pages/disclaimer.html" class="hover:text-white">Disclaimer</a>
      </nav>
      <div class="text-slate-500">&copy; 2025 HeroZero. All Rights Reserved.</div>
    </div>
  </footer>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script>
    // Theme toggle
    (function(){const root=document.documentElement;const btn=document.getElementById('themeToggle');const stored=localStorage.getItem('hz-theme');if(stored==='dark'){root.classList.add('dark');btn&&btn.setAttribute('aria-pressed','true');btn&&(btn.textContent='‚òÄÔ∏è');}btn&&btn.addEventListener('click',()=>{const d=root.classList.toggle('dark');btn.setAttribute('aria-pressed',d?'true':'false');btn.textContent=d?'‚òÄÔ∏è':'üåô';localStorage.setItem('hz-theme',d?'dark':'light');setTimeout(()=>rebalance(true),30);});})();
    const clamp=(v,min,max)=>Math.min(Math.max(v,min),max);
    function formatINR(x){return Number(x).toLocaleString('en-IN',{maximumFractionDigits:0});}
    function countUp(el,to,duration=650,prefix='‚Çπ',isPct=false){const from=Number((el.dataset.value||'0').replace(/,/g,''))||0;const start=performance.now();function frame(t){const p=clamp((t-start)/duration,0,1);const ease=1-Math.pow(1-p,3);const val=from+(to-from)*ease;el.textContent=isPct?val.toFixed(2)+'%':(prefix?prefix:'')+formatINR(val);if(p<1)requestAnimationFrame(frame);else el.dataset.value=String(to);}requestAnimationFrame(frame);}    
    function gatherHoldings(){return [...document.querySelectorAll('#holdingsBody tr.h-row')].map(r=>({name:r.querySelector('.h-name').value.trim()||'Unnamed',value:parseFloat(r.querySelector('.h-value').value)||0,target:parseFloat(r.querySelector('.h-target').value)||0,row:r}));}
    function addRow(name='',value='',target=''){const tbody=document.getElementById('holdingsBody');const tr=document.createElement('tr');tr.className='h-row';tr.innerHTML=`<td class="px-3 py-2"><input type="checkbox" class="row-check accent-brand"/></td><td class="px-3 py-2"><input value="${name}" class="h-name calc-input w-full rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-medium"/></td><td class="px-3 py-2 text-right"><span class="input-wrap"><span class="input-affix">‚Çπ</span><input type="number" value="${value}" class="h-value calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></span></td><td class="px-3 py-2 text-right"><input type="number" value="${target}" class="h-target calc-input w-full text-right rounded-md border bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-mono"/></td><td class="px-3 py-2 text-center"><button type="button" class="remove-row inline-flex items-center justify-center w-7 h-7 rounded-md hover:bg-red-50 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400" aria-label="Remove row">‚úï</button></td>`;tbody.appendChild(tr);tr.querySelector('.remove-row').addEventListener('click',()=>{tr.remove();rebalance();});['input','change'].forEach(ev=>tr.addEventListener(ev,e=>{if(e.target.matches('.h-name,.h-value,.h-target')) rebalance();}));}
    document.getElementById('addRowBtn').addEventListener('click',()=>addRow());
    document.getElementById('removeSelectedBtn').addEventListener('click',()=>{document.querySelectorAll('#holdingsBody .row-check:checked').forEach(cb=>cb.closest('tr').remove());rebalance();});
    document.getElementById('selectAll').addEventListener('change',e=>{document.querySelectorAll('#holdingsBody .row-check').forEach(c=>c.checked=e.target.checked);});
    document.getElementById('calcBtn').addEventListener('click',()=>rebalance());
    let allocChart;function renderChart(names,currentData,targetData){const isDark=document.documentElement.classList.contains('dark');const grid=isDark?'#334155':'#e2e8f0';if(allocChart&&allocChart.destroy)allocChart.destroy();allocChart=Highcharts.chart('allocChart',{chart:{type:'pie',backgroundColor:'transparent'},title:null,credits:{enabled:false},tooltip:{pointFormatter:function(){return `<span style="color:${this.color}">‚óè</span> ${this.name}: <b>${this.y.toFixed(2)}%</b>`;}},legend:{itemStyle:{color:isDark?'#e2e8f0':'#334155'}},plotOptions:{pie:{shadow:false,center:['50%','50%'],dataLabels:{enabled:false}}},series:[{name:'Current',size:'75%',innerSize:'55%',data:names.map((n,i)=>({name:n,y:currentData[i]}))},{name:'Target',size:'95%',innerSize:'80%',data:names.map((n,i)=>({name:n,y:targetData[i]}))}]});}
    function rebalance(fromTheme){const items=gatherHoldings();if(!items.length){document.getElementById('resultTable').innerHTML='';return;}const total=items.reduce((s,it)=>s+it.value,0);const targetSum=items.reduce((s,it)=>s+it.target,0);const warn=document.getElementById('targetWarn');if(Math.abs(targetSum-100)>0.01){warn.textContent=`Target total ${targetSum.toFixed(2)}% ‚â† 100%`;warn.classList.remove('hidden');}else warn.classList.add('hidden');const rows=[];let totalBuy=0,totalSell=0;for(const it of items){const desired=total*(it.target/100);const diff=desired-it.value;const rec=diff>0?'Buy':(diff<0?'Sell':'Hold');const amount=Math.abs(diff);if(rec==='Buy') totalBuy+=amount; if(rec==='Sell') totalSell+=amount;rows.push({name:it.name,current:it.value,targetPct:it.target,desired,rec,amount,diff});}
      // Metrics
      countUp(document.getElementById('totalValue'),total);countUp(document.getElementById('totalBuy'),totalBuy);countUp(document.getElementById('totalSell'),totalSell);const targetSumEl=document.getElementById('targetSum');targetSumEl.textContent=targetSum.toFixed(2)+'%';targetSumEl.dataset.value=targetSum.toFixed(2);
      // Table build
      const tbl=document.getElementById('resultTable');tbl.innerHTML=`<thead><tr class='text-[10px] sm:text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400'><th class='px-3 py-2 text-left'>Asset</th><th class='px-3 py-2 text-right'>Current</th><th class='px-3 py-2 text-right'>Target %</th><th class='px-3 py-2 text-right'>Target Value</th><th class='px-3 py-2 text-right'>Rec.</th><th class='px-3 py-2 text-right'>Amount</th><th class='px-3 py-2 text-right'>Drift %</th></tr></thead><tbody class='divide-y divide-slate-100 dark:divide-slate-700'></tbody>`;const tbody=tbl.querySelector('tbody');rows.forEach(r=>{const driftPct= total>0 ? ((r.current/total)*100 - r.targetPct) : 0;const driftAbs=Math.abs(driftPct);const driftColor=driftAbs>5?'text-red-600 dark:text-red-400':(driftAbs>2?'text-amber-600 dark:text-amber-400':'text-slate-500 dark:text-slate-400');const recColor=r.rec==='Buy'?'text-emerald-600 dark:text-emerald-400':(r.rec==='Sell'?'text-red-600 dark:text-red-400':'text-slate-500 dark:text-slate-400');const tr=document.createElement('tr');tr.innerHTML=`<td class='px-3 py-2'>${r.name}</td><td class='px-3 py-2 text-right font-mono'>‚Çπ${formatINR(r.current)}</td><td class='px-3 py-2 text-right font-mono'>${r.targetPct.toFixed(2)}%</td><td class='px-3 py-2 text-right font-mono'>‚Çπ${formatINR(r.desired)}</td><td class='px-3 py-2 text-right font-semibold ${recColor}'>${r.rec}</td><td class='px-3 py-2 text-right font-mono ${recColor}'>‚Çπ${formatINR(r.amount)}</td><td class='px-3 py-2 text-right font-mono ${driftColor}'>${driftPct>0?'+':''}${driftPct.toFixed(2)}%</td>`;tbody.appendChild(tr);});
      document.getElementById('resultSummary').textContent=`Rows ${rows.length} ‚Ä¢ Drift threshold highlight at 2% / 5%`;
      document.getElementById('rebalanceNote').textContent='Recommendation = Buy (underweight) / Sell (overweight). Drift % = Current% - Target%.';
      // Chart
      const names=rows.map(r=>r.name);const currentPerc=rows.map(r=> total>0? (r.current/total*100):0);const targetPerc=rows.map(r=> r.targetPct);renderChart(names,currentPerc,targetPerc);
    }
    // Seed listeners for existing rows
    document.querySelectorAll('#holdingsBody tr.h-row').forEach(tr=>{['input','change'].forEach(ev=>tr.addEventListener(ev,e=>{if(e.target.matches('.h-name,.h-value,.h-target')) rebalance();}));tr.querySelector('.remove-row').addEventListener('click',()=>{tr.remove();rebalance();});});
    // Ripple effect
    document.addEventListener('click',e=>{const t=e.target.closest('.btn-ripple');if(!t)return;const r=document.createElement('span');r.className='ripple-anim';const rect=t.getBoundingClientRect();const size=Math.max(rect.width,rect.height);r.style.width=r.style.height=size+'px';r.style.left=(e.clientX-rect.left-size/2)+'px';r.style.top=(e.clientY-rect.top-size/2)+'px';t.appendChild(r);setTimeout(()=>r.remove(),600);});
    // Initial calc
    rebalance();
  </script>
</body>
</html>
